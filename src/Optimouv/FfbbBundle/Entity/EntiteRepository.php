<?php

namespace Optimouv\FfbbBundle\Entity;

/**
 * DisciplineRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class EntiteRepository extends \Doctrine\ORM\EntityRepository
{

    public function getDetailsPourEntite($idEntite){
        $query = $this->createQueryBuilder('e')
            ->select('e.codePostal, e.ville')
            ->where('e.id= :id')
            ->setParameter('id', $idEntite)
            ->getQuery();

        $result = $query->getResult();

        return $result;
    }

    public function getEntities($participants)
    {
        $query = $this->createQueryBuilder('e')
            ->select('e.id', 'e.codePostal, e.ville', 'e.nom', 'e.typeEntite', 'e.prenom', 'e.adresse', 'e.longitude'
                , 'e.latitude', 'e.projection', 'e.typeEquipement', 'e.nombreEquipement', 'e.capaciteRencontre'
                , 'e.capacitePhaseFinale', 'e.participants', 'e.licencies', 'e.lieuRencontrePossible', 'e.idVilleFrance', 'e.poule')
            ->where('e.id IN (:id)')
            ->setParameter('id', array_values($participants))
            ->orderBy('e.id','DESC')
            ->getQuery();

        $result = $query->getResult();


        return $result;

    }

    public function deleteEntities($ids)
    {
        $query = $this->createQueryBuilder('e')
            ->delete()
            ->where('e.id IN (:id)')
            ->setParameter('id', array_values($ids))
            ->getQuery();

        $result = $query->getResult();


        return $result;

    }




}