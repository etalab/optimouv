{% extends '::BOLayout.html.twig' %}

 {% block pagewrapper %}

     <div id="page-wrapper">

         <div class="row">
             <div class="col-lg-12">
                 <h3 class="page-header">Vos Listes </h3>
             </div>
         </div>


         <div class="col-md-6">
             <input class="filter form-control" type="text" placeholder="Rechercher parmi mes listes de participants">
             <select multiple="multiple" id="liste_partcipants" class="form-control" style="height: 100px;">
                 {% for ListeParticipants in listesParticipants %}
                     <option	value={{ ListeParticipants.nom }}> {{ ListeParticipants.nom }}</option>
                 {% endfor %}
             </select>
             <br>
             <button id="btn_liste_participants" type="submit" class="btn btn-default  pull-right">Importer une nouvelle liste </button>
             <input id="input_liste_participants" type="file" class="btn pull-left" style="width:30%">
         </div>


         <div class="row">
             <div class="col-lg-12">
                 <h3 class="page-header">Ajouter des lieux </h3>
             </div>
         </div>

         <div class="col-md-6">
             <input class="filter form-control" type="text" placeholder="Rechercher parmi mes listes de lieux">
             <select multiple="multiple" id="liste_lieux" class="form-control" style="height: 100px;">
                 {% for listeLieux in listesLieux %}
                     <option	value={{ listeLieux.nom}}>{{ listeLieux.nom }}</option>
                 {% endfor %}
             </select>
             <br>
             <button id="btn_liste_lieux" type="submit" class="btn btn-default  pull-right">Importer une nouvelle liste </button>
             <input id="input_liste_lieux" type="file" class="btn pull-left" style="width:30%">
         </div>

    </div>


 {% endblock %}

{% block javascripts %}
    <script>
        // bouton pour importer une liste de participants
        $("#btn_liste_participants").click(function(){
            console.log("upload listeParticipants");

            var data = new FormData();
            $.each($('#input_liste_participants')[0].files, function(i, file) {
                data.append('file-'+i, file);
            });

            $.ajax({
                url: 'creer_liste_participants',
                type: 'POST',
                data: data,
                contentType: false,
                processData: false,
                success: function(data, textStatus, jqXHR)
                {
                    if(typeof data.error === 'undefined')
                    {
                        // Success so call function to process the form
                        console.log('SUCCESS: ' + data);

                        // supprimer les enfants de l'Ã©lement select liste_partcipants
                        $("#liste_partcipants").empty();

                        $.each(data, function(index, value){
                            $("#liste_partcipants").append("<option value=" + value.nom + ">" + value.nom + "</option>");
                        });

                    }
                    else
                    {
                        // Handle errors here
                        console.log('ERRORS: ' + data.error);
                    }
                },
                error: function(jqXHR, textStatus, errorThrown)
                {
                    // Handle errors here
                    console.log('ERRORS: ' + textStatus);
                },
            });

        })


        // bouton pour importer une liste de lieux
        $("#btn_liste_lieux").click(function(){
            console.log("upload listeLieux");
            console.log($("#input_liste_lieux").val());

        })



    </script>
{% endblock %}





