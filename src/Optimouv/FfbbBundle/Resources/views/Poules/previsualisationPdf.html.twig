<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, width=device-width" />
    <meta charset="UTF-8">
    <style>
        table {
            border-collapse: collapse;
        }

        table, td, th {
            border: 1px solid black;
        }
    </style>
</head>
<body>


!-- declaration de variables -->
<!-- distanceMin -->
{% set distanceMinOpSansContrainte = scenarioOptimalSansContrainte.estimationGenerale.distanceTotale %}
{% set distanceMinOpSansContrainte = (distanceMinOpSansContrainte / 1000)|round %}
<!-- distanceTotale -->
{% set distanceTotaleOpSansContrainte = scenarioOptimalSansContrainte.estimationGenerale.distanceTotaleTousParticipants %}
{% set distanceTotaleOpSansContrainte = (distanceTotaleOpSansContrainte / 1000)|round %}
<!-- nbrParticipantsTotal -->
{% set nbrParticipantsTotalOpSansContrainte = scenarioOptimalSansContrainte.estimationGenerale.nbrParticipantsTotal %}
<!-- dureeTotale -->
{% set dureeTotaleOpSansContrainte = scenarioOptimalSansContrainte.estimationGenerale.dureeTotale %}
<!-- estimationDetails -->
{% set estimationDetailsOpSansContrainte = scenarioOptimalSansContrainte.estimationDetails %}
<!-- rencontreDetails -->
{% set rencontreDetailsOpSansContrainte = scenarioOptimalSansContrainte.rencontreDetails %}
<!-- coordPoules -->
{% set coordPoulesOpSansContrainte = scenarioOptimalSansContrainte.poulesCoords %}


{#<img src="https://symfony.com/images/v5/opengraph/symfony_logo.png?v=4" width="100">#}
{% set pathImage = base_url %}
{% set pathImage = pathImage~"/bundles/ffbb/accueil/img/Logo-Optimouv.jpg" %}

<img src="http://{{pathImage}}" />

<br><br>

<h3> Export de votre recherche "{{ nomRapport }}" - scénario optimal</h3>
<h4>Fédération : UFOLEP</h4>
<h4> Discipline : Rugby</h4>
<h4>Utilisateur : Jean Dupont</h4>
<h4>Nom de la liste : {{ nomListe }}</h4>
<h4>Nom du groupe : {{ nomGroupe }}</h4>
<h4>Type de rencontre : {{ typeMatch }} </h4>
<h4>Poules : {{ nombrePoule }} poules de {{ taillePoule }} équipes </h4>
<h4>Contraintes : {{ contrainte }} </h4>



{% set pathCarte = "https://image.maps.api.here.com/mia/1.6/mapview?poi=" %}
{% set coordEq ="" %}
{% for key,coordPouleOpSansContrainte in coordPoulesOpSansContrainte %}

    {% for coordonneeVilleOpSansContrainte in coordPouleOpSansContrainte %}
        {% set  x = coordonneeVilleOpSansContrainte[0] %}
        {% set y =  coordonneeVilleOpSansContrainte[1] %}
        {% set xy = x~"%2C"~y %}
        {% set coordEq = coordEq~xy~"%2C"  %}


    {% endfor %}
{% endfor %}


{% set coordEq = coordEq[:-3] %}


<img src="https://image.maps.api.here.com/mia/1.6/mapview?poi={{ coordEq }}&ml=fre&poitxs=16&poifc=olive&app_id={{ app_id }}&amp;app_code={{ app_code }}&w=1024&h=600" style="margin-left: 40px">
<div style="page-break-after:always;"></div>

<!-- bloc estimation générale -->
<div>
    <h4> Estimations</h4>
    <ul>

        <li>
            <strong>{{ distanceMinOpSansContrainte|number_format(0, ',', ' ') }} </strong>
            kilomètres au total
            à parcourir pour l'ensemble du scénario
        </li>
        <li>
            <strong> {{ (distanceTotaleOpSansContrainte * 0.80 )|round|number_format(0, ',', ' ') }}</strong>
            € pour réaliser les trajets de l'ensemble du scénario
            en voiture
        </li>
        <li>
            <strong> {{ (distanceTotaleOpSansContrainte /4 * 0.80 )|round|number_format(0, ',', ' ') }}</strong>
            € pour réaliser les trajets de l'ensemble du scénario
            en covoiturage
        </li>
        <li>
            <strong>{{ (distanceTotaleOpSansContrainte /9 * 1.31)|round|number_format(0, ',', ' ') }} </strong>
            € pour réaliser les trajets de l'ensemble du scénario
            en minibus
        </li>
        <li>
            <strong> {{ (distanceTotaleOpSansContrainte * 0.157)|round|number_format(0, ',', ' ') }}</strong>
            KG eq CO2 d'émissions totales de GES pour {{ nbrParticipantsTotalOpSansContrainte }}
            joueurs en voiture individuelle
            pour le scénario
        </li>
        <li>
            <strong>{{ (distanceTotaleOpSansContrainte/4 * 0.157)|round|number_format(0, ',', ' ') }} </strong>
            KG eq CO2 d'émissions totales de GES pour {{ nbrParticipantsTotalOpSansContrainte }}
            joueurs en co-voiturage pour le scénario
        </li>
        <li>
            <strong>{{ (distanceTotaleOpSansContrainte/9 * 0.185)|round|number_format(0, ',', ' ') }} </strong>
            KG eq CO2 d'émissions totales de GES pour {{ nbrParticipantsTotalOpSansContrainte }}
            joueurs en minibus pour le scénario

        </li>
    </ul>

</div>



<form name="submitParams" action="{{ path('ffbb_previsualisation_pdf')}}" method="post">
    <input type="hidden" value="{{ idRapport }}" name="params" id="params">

    <button type="submit" class="btn btn-primary  pull-right">Exporter</button>
</form>

{#<a href="{{ path('ffbb_export_pdf', {'params': params}) }}" class="btn btn-primary  pull-right">sauvegarder</a>#}

</body>
</html>
