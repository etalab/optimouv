{% extends '::BOLayout.html.twig' %}

     {% block pagewrapper %}

         <div id="page-wrapper">


             <div class="row">
                 <div class="bs-example">
                     <ul class="breadcrumb">
                         <li><a href="{{ path('ffbb_accueil_connect') }}">Accueil</a></li>
                         <li class="active">Optimisation des poules
                         </li>
                     </ul>
                 </div>
                 <div class="col-lg-12">
                     <h2 style="margin-bottom: 20px">Etape 1 / 4</h2>
                     <span class="moncercle_poule" style="font-weight: bold; padding-bottom: -20px">1</span>
                     <h3>Choisissez les équipes participantes
                     </h3>
                 </div>
                 <!-- /.col-lg-12 -->
             </div>
             <!-- /.row -->

              <div class="row">
                   <div class="col-lg-12">
                        <div class="panel panel-default">

                             <div class="panel-body">
                                  <div class="row">
                                       <div class="col-lg-6">
                                            <form role="form" action="{{ path('ffbb_poule_nouveau_groupe') }}" method="post" name="liste">

                                                <!-- /. liste participants -->
                                                <div class="form-group">

                                                    <div class="panel panel-default">
                                                        <div class="panel-heading">
                                                            Liste d'équipes
                                                        </div>
                                                        <!-- /.panel-heading -->
                                                        <div class="panel-body" style="height:250px !important; overflow-y: scroll">
                                                            <div class="table-responsive">
                                                                <table class="table table-hover">

                                                                    <tbody id="tableListeParticipants" >
                                                                    {% for participant in listeParticipants %}
                                                                        <tr>
                                                                            <td><input type="radio" name="listeParticipants" id="participant~{{ participant.id }}" value="{{ participant.id }}" required>
                                                                                {{ participant.nom }}
                                                                            </td>

                                                                        </tr>
                                                                    {% endfor %}
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                            <!-- /.table-responsive -->
                                                        </div>
                                                        <!-- /.panel-body -->

                                                    </div>

                                                </div><!-- /.fin liste participants -->

                                                <!-- /. liste lieux -->
                                                         <div class="col-lg-5">
                                                            <span class="moncercle_poule" style="font-weight: bold">3</span>
                                                            <button type="submit" class="btn btn-primary">Créer une sélection </button>
                                                            {#<span style="font-weight: bold; float: right">ou</span>#}
                                                        </div>
                                            </form>
                                                        <div class="col-lg-7">
                                                            <button class="btn btn-primary pull-right" onclick="getCheckedRadioValue()"> Choisir une sélection existante </button>
                                                            <span class="moncercle_poule" style="float: right; font-weight: bold">4</span>
                                                        </div>






                                       </div>
                                       <!-- /.col-lg-6 (nested) -->
                                      <div class="col-lg-6">
                                          <div class="row" style="padding-right: 50px">
                                              <div style="position: relative;" class="col-lg-4">
                                                  {#<span style="font-weight: bold">ou</span>#}
                                              </div>

                                              <div style="position: relative; float: right " class="col-lg-8">
                                                  <a href="{{ path('ffbb_poules_gerer_liste') }}"
                                                     class="btn btn-primary  pull-right">Gérer et importer
                                                  </a>
                                                  <span class="moncercle_poule" style="float: right">2</span>
                                              </div>
                                          </div>
                                          <br> <br>
                                          <div class="row" style="padding-right: 15px"> <a href="{{ asset('bundles/ffbb/telechargement/OPTIMOUV-optimisation-poules.zip') }}" class="pull-right" style="font-size: small">Télécharger les formats de fichiers d'import</a> </div>


                                      </div>

                                       <!-- /.col-lg-6 (nested) -->
                                  </div>
                                  <!-- /.row (nested) -->
                             </div>
                             <!-- /.panel-body -->
                        </div>
                        <!-- /.panel -->
                   </div>
                   <!-- /.col-lg-12 -->
              </div>
             </div>
     {% endblock %}
{% block javascripts %}
    <!-- code interne dual list box -->
    <script>

        function getCheckedRadioValue() {
            //   var elements = document.getElementsByName(listeParticipants);
            var elements = document.forms.liste.listeParticipants;
            var elementsLieux = document.forms.liste.listeLieux;
            if (elements.length == undefined){
                var idListe  = elements.value;
                idListe = parseInt(idListe);
                var url = "choisir-groupe";
                var chemin = url + "/" + idListe;
                window.location.href = chemin;
                elements.checked = false;
                elementsLieux.checked = false;

            } else {
                len = elements.length;
                for (var i=0; i<len; ++i){

                    if (elements[i].checked){
                        var idListe  = elements[i].value;
                        idListe = parseInt(idListe);
                        var url = "choisir-groupe";
                        var chemin = url + "/" + idListe;
                        window.location.href = chemin;
                        elements.checked = false;
                        elementsLieux.checked = false;
                        //alert(chemin);
                    }
                }
            }
        }

        // séléctionner la dernière liste de participants uploadée par l'utilisateur
        $(document).ready(function () {
            $("#tableListeParticipants").children("tr:first").find("td:first").find('input:radio').prop("checked", true);
        });
        

    </script>
{% endblock %}






